<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Recorrido Virtual - Propiedad</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #1b1b1b;
      color: #eee;
      display: flex;
      height: 100vh;
    }

    /* P√°gina principal */
    .main {
      flex: 3;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .sidebar {
      flex: 1;
      background: #242424;
      overflow-y: auto;
      padding: 15px;
    }

    .widget {
      background: #2d2d2d;
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }

    .widget h2 {
      font-size: 16px;
      margin: 0 0 10px 0;
      color: #fff;
    }

    /* Plano */
    .plano img {
      width: 100%;
      border-radius: 8px;
      cursor: pointer;
    }

    /* Ficha t√©cnica */
    .ficha table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }
    .ficha td {
      padding: 6px 0;
      border-bottom: 1px solid #444;
    }

    /* Lugares cercanos */
    .lugares ul {
      list-style: none;
      padding: 0;
      margin: 0 0 10px 0;
      font-size: 14px;
    }
    .lugares li {
      margin: 6px 0;
    }
    .btn-vermas {
      width: 100%;
      padding: 10px;
      border: none;
      border-radius: 8px;
      background: #2d89ef;
      color: #fff;
      font-size: 14px;
      cursor: pointer;
    }
    .btn-vermas:hover {
      background: #1b5fbf;
    }

    /* Lightbox */
    #visor {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.85);
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }
    #visor img {
      max-width: 80%;
      max-height: 80%;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.5);
    }

    #visor-plano {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.85);
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }
    #visor-plano img {
      max-width: 80%;
      max-height: 80%;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.5);
    }

    /* Galer√≠a */
    .galeria h2 {
      display: block;
      width: 100%;
      margin-bottom: 15px;
    }
    .galeria .grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
    }
    .galeria .grid img {
      width: 100%;
      border-radius: 8px;
      cursor: pointer;
    }

    /* Widget BIM / Potree */
    #widget-bim {
      background: rgba(30,30,30,0.95);
      padding: 10px;
      border-radius: 12px;
      box-shadow: 0 0 8px rgba(0,0,0,0.3);
      position: relative;
      overflow: hidden;
    }

    #widget-bim h3 {
      text-align: left;
      margin-top: 0;
      color: #eee;
    }

    .tabs-bim {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .tabs-bim button {
      background: #333;
      color: #eee;
      border: none;
      border-radius: 6px;
      padding: 6px 10px;
      cursor: pointer;
      transition: 0.3s;
    }

    .tabs-bim button:hover {
      background: #555;
    }

    .tabs-bim button.active {
      background: #2d89ef;
      color: #fff;
    }

    .bim-controls {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 6px;
    }

    .bim-controls button {
      background: #444;
      color: #fff;
      border: none;
      padding: 5px 10px;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.3s;
    }

    .bim-controls button:hover {
      background: #666;
    }
  </style>
</head>

<body>
  <div class="main">
    <iframe src="torres-santa-catalina/app-files/index.html" width="100%" height="100%" frameborder="0"></iframe>
  </div>

  <div class="sidebar">
     <!-- === Widget: Modelo 3D / Nube de puntos === -->
    <div class="widget" id="widget-bim">
      <h3>Modelado 3D</h3>

     <!--<div class="tabs-bim">
        <button id="btnBIM" class="active" onclick="mostrarBIM()">üß± Modelo BIM</button>
        <button id="btnNube" onclick="mostrarNube()">‚òÅÔ∏è Nube de puntos</button>
      </div>-->

      <!-- Modelo BIM -->
      <div id="contenedor-bim" style="display:block;">
        <model-viewer id="bimModel"
                      src="static/models/casa.glb"
                      alt="Modelo BIM de la casa"
                      camera-controls
                      auto-rotate
                      shadow-intensity="1"
                      exposure="0.9"
                      environment-image="neutral"
                      interaction-prompt="none"
                      style="width:100%; height:300px; border-radius:12px; background-color:#222;">
        </model-viewer>

        <div class="bim-controls">
          <button onclick="toggleFullScreen()">‚õ∂ Pantalla completa</button>
        </div>
      </div>

           <!-- Nube de puntos Potree 
      <div id="contenedor-nube" style="display:none;">
        <iframe src="static/potree/Mirador_Ago2025.html"
                width="100%"
                height="300"
                frameborder="0"
                style="border-radius:12px; background:#000;">
        </iframe>
        <div class="bim-controls">
          <button onclick="window.open('static/potree/Mirador_Ago2025.html','_blank')">
            üåê Ver en pantalla completa
          </button>
        </div>
      </div> -->


    </div>

      <!-- Plano -->
    <div class="widget plano">
      <h2>Plano de la Casa</h2>
      <img src="imagenes/plano_casa_pb.jpg" alt="Planta baja" onclick="abrirPlano(this)">
    </div>

    <div id="visor-plano" onclick="cerrarPlano()">
      <img id="visor-plano-img">
    </div>

    <!-- Ficha t√©cnica -->
    <div class="widget ficha">
      <h2>Ficha T√©cnica</h2>
      <table>
        <tr><td>üè† Construcci√≥n:</td><td>71.30 m¬≤</td></tr>
        <tr><td>üå≥ Area balcon:</td><td>5.79 m¬≤</td></tr>
        <tr><td>üõè Habitaciones:</td><td>3</td></tr>
        <tr><td>üöΩ Ba√±os:</td><td>2</td></tr>
        <tr><td>üöó Parqueaderos:</td><td>1</td></tr>
        <tr><td>üìÖ A√±o:</td><td>2024</td></tr>
      </table>
    </div>

    <!-- Lugares cercanos -->
    <div class="widget lugares">
      <h2>Lugares Cercanos</h2>
      <ul>
        <li>üõí Supermercado ‚Äî <strong>5 min en auto</strong></li>
        <li>üè´ Escuela ‚Äî <strong>3 min caminando</strong></li>
        <li>üè• Hospital ‚Äî <strong>7 min en auto</strong></li>
        <li>üå≥ Parque ‚Äî <strong>4 min caminando</strong></li>
      </ul>
      <button class="btn-vermas" onclick="window.location.href='widget-poi/index.html'">Ver todos los lugares cercanos</button>
    </div>

    <!-- Galer√≠a -->
    <div class="widget galeria">
      <h2>Galer√≠a de Fotos</h2>
      <div class="grid">
        <img src="imagenes/foto1.jpg" alt="Foto 1" onclick="abrir(this)">
        <img src="imagenes/foto2.jpg" alt="Foto 2" onclick="abrir(this)">
        
      </div>
    </div>

    <div id="visor" onclick="cerrar()">
      <img id="visor-img">
    </div>

  </div>

  <!-- Librer√≠a model-viewer -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

  <script>
    function toggleRotation() {
      const viewer = document.querySelector('#widget-bim model-viewer');
      viewer.autoRotate = !viewer.autoRotate;
    }

    function toggleFullScreen() {
      const viewer = document.querySelector('#widget-bim model-viewer');
      if (!document.fullscreenElement) {
        viewer.requestFullscreen();
      } else {
        document.exitFullscreen();
      }
    }

    function mostrarBIM() {
      document.getElementById('contenedor-bim').style.display = 'block';
      document.getElementById('contenedor-nube').style.display = 'none';
      document.getElementById('btnBIM').classList.add('active');
      document.getElementById('btnNube').classList.remove('active');
    }

    function mostrarNube() {
      document.getElementById('contenedor-bim').style.display = 'none';
      document.getElementById('contenedor-nube').style.display = 'block';
      document.getElementById('btnNube').classList.add('active');
      document.getElementById('btnBIM').classList.remove('active');
    }

    function abrir(img) {
      document.getElementById('visor').style.display = 'flex';
      document.getElementById('visor-img').src = img.src;
    }

    function cerrar() {
      document.getElementById('visor').style.display = 'none';
    }

    function abrirPlano(img) {
      document.getElementById('visor-plano').style.display = 'flex';
      document.getElementById('visor-plano-img').src = img.src;
    }

    function cerrarPlano() {
      document.getElementById('visor-plano').style.display = 'none';
    }
  </script>
</body>
</html>
